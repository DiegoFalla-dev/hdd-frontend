# ๐๏ธ Arquitectura - Sistema de Promociones

## Flujo de Datos

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         FRONTEND (React + TypeScript)                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ Navbar.tsx                                                   โ   โ
โ  โ โโโ NavLink to="/promociones"                               โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ App.tsx                                                      โ   โ
โ  โ โโโ import Promociones from './pages/Promociones'           โ   โ
โ  โ โโโ Route path="/promociones" element={<Promociones />}     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ Promociones.tsx (366 lรญneas)                                โ   โ
โ  โ                                                              โ   โ
โ  โ useQuery({                                                  โ   โ
โ  โ   queryKey: ['promotions'],                                 โ   โ
โ  โ   queryFn: () => api.get('/promotions')                     โ   โ
โ  โ })                                                           โ   โ
โ  โ                                                              โ   โ
โ  โ โโ Renderiza:                                               โ   โ
โ  โ โ  โโ Hero Section                                          โ   โ
โ  โ โ  โโ Promo Cards (8x)                                      โ   โ
โ  โ โ  โ  โโ Cรณdigo con botรณn COPIAR                           โ   โ
โ  โ โ  โ  โโ Descuento (% o S/)                                โ   โ
โ  โ โ  โ  โโ Fecha de expiraciรณn                               โ   โ
โ  โ โ  โ  โโ Monto mรญnimo                                      โ   โ
โ  โ โ  โ  โโ Usos disponibles                                  โ   โ
โ  โ โ  โ  โโ Botรณn USAR CรDIGO                                โ   โ
โ  โ โ  โโ Badge: ยกVence en X dรญas! (si โค7 dรญas)              โ   โ
โ  โ โ  โโ Info section                                         โ   โ
โ  โ โ                                                            โ   โ
โ  โ โโ Estados:                                                  โ   โ
โ  โ    โโ Loading: Spinner                                      โ   โ
โ  โ    โโ Error: Mensaje                                        โ   โ
โ  โ    โโ Empty: \"No hay promociones activas\"                 โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ promotionService.ts (Actualizado)                           โ   โ
โ  โ                                                              โ   โ
โ  โ export async function getAllPromotions()                    โ   โ
โ  โ {                                                            โ   โ
โ  โ   return await api.get<Promotion[]>('/promotions')         โ   โ
โ  โ }                                                            โ   โ
โ  โ                                                              โ   โ
โ  โ export async function validatePromotion(code, amount)      โ   โ
โ  โ {                                                            โ   โ
โ  โ   return await api.get('/promotions/validate', {            โ   โ
โ  โ     params: { code, amount }                                โ   โ
โ  โ   })                                                         โ   โ
โ  โ }                                                            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ types/Promotion.ts (Actualizado)                            โ   โ
โ  โ                                                              โ   โ
โ  โ export interface Promotion {                                โ   โ
โ  โ   id: number                                                โ   โ
โ  โ   code: string                                              โ   โ
โ  โ   description: string                                       โ   โ
โ  โ   discountType: 'PERCENTAGE' | 'FIXED_AMOUNT'              โ   โ
โ  โ   value: number                                             โ   โ
โ  โ   startDate: string (ISO)                                   โ   โ
โ  โ   endDate: string (ISO)                                     โ   โ
โ  โ   minAmount: number | null                                  โ   โ
โ  โ   maxUses: number | null                                    โ   โ
โ  โ   currentUses: number                                       โ   โ
โ  โ   isActive: boolean                                         โ   โ
โ  โ }                                                            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ apiClient.ts (axios instance)                               โ   โ
โ  โ โ HTTP GET /api/promotions                                  โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                    HTTP Request (JSON)
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      BACKEND (Spring Boot)                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ PromotionController.java                                    โ   โ
โ  โ                                                              โ   โ
โ  โ @GetMapping(\"/\")                                           โ   โ
โ  โ public ResponseEntity<List<PromotionDTO>> getAll()         โ   โ
โ  โ {                                                            โ   โ
โ  โ   return promotionService.getAllPromotions()               โ   โ
โ  โ }                                                            โ   โ
โ  โ                                                              โ   โ
โ  โ @GetMapping(\"/validate\")                                  โ   โ
โ  โ public ResponseEntity<Map> validatePromotion(              โ   โ
โ  โ   @RequestParam String code,                               โ   โ
โ  โ   @RequestParam BigDecimal amount                           โ   โ
โ  โ )                                                            โ   โ
โ  โ {                                                            โ   โ
โ  โ   return promotionService.isValidForAmount(code, amount)   โ   โ
โ  โ }                                                            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ PromotionService.java (Interface)                           โ   โ
โ  โ PromotionServiceImpl.java (Implementation)                   โ   โ
โ  โ                                                              โ   โ
โ  โ - getAllPromotions()                                        โ   โ
โ  โ - getActivePromotionByCode()                                โ   โ
โ  โ - isValidPromotionForAmount()                               โ   โ
โ  โ - createPromotion()                                         โ   โ
โ  โ - updatePromotion()                                         โ   โ
โ  โ - deletePromotion()                                         โ   โ
โ  โ                                                              โ   โ
โ  โ Validaciones incluidas:                                     โ   โ
โ  โ โ Cรณdigo existe                                             โ   โ
โ  โ โ Estรก activa (is_active = true)                           โ   โ
โ  โ โ Estรก en rango de fechas (start_date โค now โค end_date)   โ   โ
โ  โ โ No ha alcanzado lรญmite de usos (current_uses < max_uses)โ   โ
โ  โ โ Monto mรญnimo satisfecho (amount โฅ min_amount)            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ PromotionRepository.java (JPA)                              โ   โ
โ  โ                                                              โ   โ
โ  โ interface PromotionRepository                               โ   โ
โ  โ extends JpaRepository<Promotion, Long>                      โ   โ
โ  โ {                                                            โ   โ
โ  โ   Optional<Promotion> findByCode(String code)              โ   โ
โ  โ                                                              โ   โ
โ  โ   Optional<Promotion>                                       โ   โ
โ  โ   findByCodeAndIsActiveTrueAndStartDate...                 โ   โ
โ  โ   ...BeforeAndEndDateAfter(String, LocalDateTime, ...)     โ   โ
โ  โ }                                                            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ Promotion.java (Entity JPA)                                 โ   โ
โ  โ                                                              โ   โ
โ  โ @Entity                                                     โ   โ
โ  โ @Table(name = \"promotions\")                                โ   โ
โ  โ public class Promotion {                                    โ   โ
โ  โ   @Id                                                       โ   โ
โ  โ   @GeneratedValue                                           โ   โ
โ  โ   private Long id;                                          โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(unique=true, length=50)                           โ   โ
โ  โ   private String code;                                      โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(columnDefinition=\"TEXT\")                         โ   โ
โ  โ   private String description;                               โ   โ
โ  โ                                                              โ   โ
โ  โ   @Enumerated(EnumType.STRING)                              โ   โ
โ  โ   private DiscountType discountType;                        โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(precision=5, scale=2)                             โ   โ
โ  โ   private BigDecimal value;                                 โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(name=\"start_date\")                               โ   โ
โ  โ   private LocalDateTime startDate;                          โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(name=\"end_date\")                                 โ   โ
โ  โ   private LocalDateTime endDate;                            โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(name=\"min_amount\")                               โ   โ
โ  โ   private BigDecimal minAmount;                             โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(name=\"max_uses\")                                 โ   โ
โ  โ   private Integer maxUses;                                  โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(name=\"current_uses\")                             โ   โ
โ  โ   private Integer currentUses;                              โ   โ
โ  โ                                                              โ   โ
โ  โ   @Column(name=\"is_active\")                                โ   โ
โ  โ   private Boolean isActive;                                 โ   โ
โ  โ }                                                            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                          โ                                            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ PromotionDTO.java (Data Transfer Object)                    โ   โ
โ  โ                                                              โ   โ
โ  โ @Data                                                       โ   โ
โ  โ public class PromotionDTO {                                 โ   โ
โ  โ   (same fields as Promotion)                                โ   โ
โ  โ }                                                            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                    HTTP Response (JSON)
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      DATABASE (MySQL/MariaDB)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ Table: promotions                                            โ   โ
โ  โ                                                              โ   โ
โ  โ CREATE TABLE promotions (                                   โ   โ
โ  โ   id BIGINT PRIMARY KEY AUTO_INCREMENT,                     โ   โ
โ  โ   code VARCHAR(50) UNIQUE NOT NULL,                         โ   โ
โ  โ   description TEXT NOT NULL,                                โ   โ
โ  โ   discount_type ENUM('PERCENTAGE','FIXED_AMOUNT') NOT NULL, โ   โ
โ  โ   value DECIMAL(5,2) NOT NULL,                              โ   โ
โ  โ   start_date DATETIME NOT NULL,                             โ   โ
โ  โ   end_date DATETIME NOT NULL,                               โ   โ
โ  โ   min_amount DECIMAL(10,2),                                 โ   โ
โ  โ   max_uses INT,                                             โ   โ
โ  โ   current_uses INT DEFAULT 0,                               โ   โ
โ  โ   is_active BOOLEAN DEFAULT true,                           โ   โ
โ  โ   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,           โ   โ
โ  โ   updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP            โ   โ
โ  โ        ON UPDATE CURRENT_TIMESTAMP                          โ   โ
โ  โ );                                                           โ   โ
โ  โ                                                              โ   โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ   โ
โ  โ โ Data (8 rows - V6__insert_promotional_codes.sql)        โ โ   โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค โ   โ
โ  โ โ id โ code           โ discount_type โ value โ is_active โ โ   โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค โ   โ
โ  โ โ 1  โ NAVIDAD2024    โ PERCENTAGE    โ 20.00 โ 1         โ โ   โ
โ  โ โ 2  โ WEEKEND50      โ FIXED_AMOUNT  โ 50.00 โ 1         โ โ   โ
โ  โ โ 3  โ ESTUDIANTE15   โ PERCENTAGE    โ 15.00 โ 1         โ โ   โ
โ  โ โ 4  โ REFIERE20      โ FIXED_AMOUNT  โ 20.00 โ 1         โ โ   โ
โ  โ โ 5  โ BLACK2025      โ PERCENTAGE    โ 30.00 โ 1         โ โ   โ
โ  โ โ 6  โ PROMO6ENTRADAS โ PERCENTAGE    โ 25.00 โ 1         โ โ   โ
โ  โ โ 7  โ DULCERIA35     โ FIXED_AMOUNT  โ 35.00 โ 1         โ โ   โ
โ  โ โ 8  โ NEWYEAR2025    โ PERCENTAGE    โ 12.00 โ 1         โ โ   โ
โ  โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                                                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Integraciรณn con Sistema de Precios

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CarritoTotal.tsx (/pago)                                       โ
โ                                                                โ
โ 1. Usuario ingresa cรณdigo promocional                          โ
โ    โ                                                           โ
โ 2. usePromotionValidation hook                                โ
โ    โ POST /api/promotions/validate?code=X&amount=Y            โ
โ 3. Backend valida y devuelve:                                 โ
โ    {                                                           โ
โ      isValid: true,                                           โ
โ      promotion: { ... }                                       โ
โ    }                                                           โ
โ    โ                                                           โ
โ 4. applyPromotion() guarda en cartStore                       โ
โ    โ                                                           โ
โ 5. useOrderPreview recalcula con calculatePriceBreakdown()   โ
โ    โ                                                           โ
โ 6. Visualizaciรณn:                                             โ
โ                                                                โ
โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                         โ
โ    โ Subtotal: S/ 150.00            โ                         โ
โ    โ Descuento (NAVIDAD2024): -30.00โ (20% de 150)            โ
โ    โ Base: S/ 120.00                โ                         โ
โ    โ IGV (18%): S/ 21.60            โ (18% de 120)            โ
โ    โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ                         โ
โ    โ TOTAL: S/ 141.60               โ                         โ
โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                         โ
โ    โ                                                           โ
โ 7. Paga                                                        โ
โ    โ                                                           โ
โ 8. POST /api/orders (incluye promotion info)                  โ
โ    โ                                                           โ
โ 9. Backend crea Order con promotion_id                        โ
โ    โ                                                           โ
โ 10. Confirmaciรณn muestra:                                     โ
โ     Promociรณn: NAVIDAD2024                                    โ
โ     Descuento: S/ 30.00                                       โ
โ                                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Ciclo de Vida de una Promociรณn

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ADMIN PANEL (Futuro)                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                               โ
โ CREATE PROMOTION                                             โ
โ   โโ Cรณdigo                                                  โ
โ   โโ Descripciรณn                                             โ
โ   โโ Tipo (PERCENTAGE o FIXED_AMOUNT)                       โ
โ   โโ Valor                                                   โ
โ   โโ Fecha inicio                                            โ
โ   โโ Fecha fin                                               โ
โ   โโ Monto mรญnimo                                            โ
โ   โโ Mรกximo de usos                                          โ
โ   โโ Activar/Desactivar                                      โ
โ         โ                                                     โ
โ INSERT โ Promotion.java                                      โ
โ         โ                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           DISPONIBLE EN PรGINA /promociones                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                               โ
โ Si: is_active=true AND start_date โค now โค end_date          โ
โ Entonces: Mostrar en listado                                 โ
โ                                                               โ
โ ยกEspecial! Si: end_date - now โค 7 dรญas                      โ
โ Entonces: Mostrar badge \"ยกVence en X dรญas!\"               โ
โ         โ                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          USUARIO COPIA CรDIGO Y HACE COMPRA                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                               โ
โ 1. Promociones.tsx โ Botรณn [COPIAR]                         โ
โ    Cรณdigo โ Clipboard                                        โ
โ                                                               โ
โ 2. Cartelera โ Selecciona pelรญcula                          โ
โ                                                               โ
โ 3. CarritoTotal โ Ingresa cรณdigo                            โ
โ    validatePromotion(code, amount)                           โ
โ           โ                                                   โ
โ    Validaciones:                                             โ
โ    โ Existe el cรณdigo                                        โ
โ    โ is_active = true                                        โ
โ    โ En rango de fechas                                      โ
โ    โ current_uses < max_uses                                 โ
โ    โ amount โฅ min_amount                                     โ
โ           โ                                                   โ
โ    Si todas OK:                                              โ
โ    โ isValid = true                                          โ
โ    โ Aplica descuento                                        โ
โ    โ Muestra cรณdigo en resumen                               โ
โ                                                               โ
โ 4. Paga (CarritoTotal โ POST /api/orders)                   โ
โ           โ                                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           INCREMENTA CONTADOR DE USOS                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                               โ
โ UPDATE promotions                                            โ
โ SET current_uses = current_uses + 1                          โ
โ WHERE id = X                                                 โ
โ         โ                                                     โ
โ Cuando current_uses = max_uses:                              โ
โ โ Promociรณn se agota                                         โ
โ โ Ya no aparece en /promociones                              โ
โ         โ                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         CUANDO VENCE LA FECHA DE FIN                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                               โ
โ now > end_date                                               โ
โ         โ                                                     โ
โ Automรกtico:                                                  โ
โ โ No aparece en GET /api/promotions                         โ
โ โ No pasa validaciรณn en validatePromotion()                 โ
โ โ Admin puede:                                               โ
โ   - Desactivar (is_active = false)                          โ
โ   - Actualizar fechas                                        โ
โ   - Borrar                                                   โ
โ                                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**Este es el flujo completo de datos desde la interfaz hasta la base de datos.** โ
